<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Highcharts Example</title>
		
		
		<!-- 1. Add these JavaScript inclusions in the head of your page -->
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
		<script type="text/javascript" src="js/highcharts.js"></script>
		
		<!-- 1a) Optional: add a theme file -->
		<!--
			<script type="text/javascript" src="../js/themes/gray.js"></script>
		-->
		
		<!-- 1b) Optional: the exporting module -->
		<script type="text/javascript" src="js/modules/exporting.js"></script>
		
		
		<!-- 2. Add the JavaScript to initialize the chart on document ready -->
		<script type="text/javascript">
		
			var chart;
			$(document).ready(function() {

			var options = {
				chart: {
					renderTo: 'container',
					defaultSeriesType: 'scatter',
			                zoomType: 'xy'
				},
				title: {
					text: 'Global petrol price'
				},
					tooltip: {
						formatter: function() {
				                return ''+this.point.name;
								
						}
					},
			        xAxis: {
						title: {
							text: 'GDP / capita ($)'
						},
labels: {
            formatter: function() {
                return Math.floor(Math.exp(this.value));
            }
        }

					},
					yAxis: {
						title: {
							text: 'Gasoline price / liter (1/100 $)'
						},
					},
			        series: []
                              
			        };

			$.get('data.csv', function(data) {
                                var seriesout = { 
			                                name: "Net exporter",
							data: []
						};
                                var seriesin = { 
			                                name: "Net importer",
							data: []
						};
  			        var lines = data.split('\n');
				$.each(lines, function(lineNo, line) {
 			              var items = line.split(',');
                                      var gdp = parseFloat(items[2]);
                                      var oilout = parseFloat(items[5]);
                                      var oilin = parseFloat(items[4]);
                                      var price = parseFloat(items[6]);
        
                                      if (price > 0 & gdp > 0) {
                                        var point = { name: items[1], x: Math.log(gdp), y: price }
                                        if (oilout > oilin) {
			                   seriesout.data.push(point);
                                        } else {
			                   seriesin.data.push(point);
                                        };
                                      }
			        });
                                options.series.push(seriesin);
                                options.series.push(seriesout);
                                var chart = new Highcharts.Chart(options);
			});
	
			});
				
		</script>
		
	</head>
	<body>
		
		<!-- 3. Add the container -->
		<div id="container" style="width: 640px; height: 500px; margin: 0 auto"></div>
		
               <div id="result"></div>
				
	</body>
</html>
